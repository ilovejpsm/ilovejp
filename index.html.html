<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Love Story</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Dancing+Script:wght@400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Press Start 2P', cursive;
            background: linear-gradient(45deg, #faf7f2, #ffe4e6);
            min-height: 100vh;
            color: #8b4513;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 192, 203, 0.3);
            border: 3px solid #d4a574;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 18px;
            color: #d4669a;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0px #f5e6d3;
        }
        
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: linear-gradient(45deg, #ffc0cb, #d4a574);
            border: 3px solid #8b4513;
            padding: 12px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            color: #8b4513;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            box-shadow: 4px 4px 0px #8b4513;
        }
        
        .nav-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0px #8b4513;
            background: linear-gradient(45deg, #ffb6c1, #deb887);
        }
        
        .nav-btn.active {
            background: linear-gradient(45deg, #d4669a, #cd853f);
            color: white;
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #8b4513;
        }
        
        .section {
            display: none;
            background: rgba(245, 230, 211, 0.8);
            border: 3px solid #d4a574;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .section.active {
            display: block;
        }
        
        .section h2 {
            color: #d4669a;
            margin-bottom: 20px;
            font-size: 16px;
            text-align: center;
        }
        
        /* Memory Books Section */
        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            justify-items: center;
        }
        
        .book-item {
            position: relative;
            width: 120px;
            height: 160px;
            cursor: pointer;
            transition: all 0.4s ease;
            transform-style: preserve-3d;
        }
        
        .book-cover {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffb6c1 0%, #ffd1dc 50%, #fff8dc 100%);
            border: 3px solid #deb887;
            border-radius: 8px;
            position: relative;
            box-shadow: 6px 6px 0px #deb887, 10px 10px 0px rgba(222, 184, 135, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 15px;
            transition: all 0.4s ease;
        }
        
        .book-item:hover .book-cover {
            transform: rotateY(-15deg) rotateX(5deg);
            box-shadow: 12px 12px 0px #deb887, 16px 16px 0px rgba(222, 184, 135, 0.3);
        }
        
        .book-spine {
            position: absolute;
            left: -6px;
            top: 3px;
            width: 6px;
            height: calc(100% - 6px);
            background: linear-gradient(180deg, #deb887, #d2b48c);
            border-radius: 2px 0 0 2px;
        }
        
        .book-title {
            font-size: 8px;
            color: #8b4513;
            margin-bottom: 8px;
            text-shadow: 1px 1px 0px #fff;
            line-height: 1.2;
        }
        
        .book-icon {
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        .book-description {
            font-size: 6px;
            line-height: 1.3;
            color: #8b4513;
            background: rgba(255, 255, 255, 0.8);
            padding: 4px;
            border-radius: 4px;
            margin-top: 5px;
        }
        
        /* Book Popups */
        .book-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .popup-content {
            background: linear-gradient(45deg, #f5e6d3, #ffc0cb);
            border: 4px solid #8b4513;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
            animation: popupAppear 0.5s ease;
        }
        
        @keyframes popupAppear {
            0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .popup-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: #d4669a;
            color: white;
            border: 2px solid #8b4513;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .popup-title {
            font-size: 14px;
            color: #d4669a;
            margin-bottom: 15px;
        }
        
        .popup-photo {
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, #ffc0cb, #f5e6d3);
            border: 3px solid #d4a574;
            border-radius: 10px;
            margin: 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #8b4513;
        }
        
        .popup-message {
            font-size: 10px;
            line-height: 1.6;
            color: #8b4513;
            margin-top: 15px;
        }
        
        /* Countdown Timer */
        .countdown-container {
            text-align: center;
        }
        
        .special-date-info {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 192, 203, 0.3);
            border: 2px dashed #d4669a;
            border-radius: 10px;
        }
        
        .countdown-mode-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            background: linear-gradient(45deg, #ffc0cb, #d4a574);
            border: 2px solid #8b4513;
            padding: 8px 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            color: #8b4513;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .mode-btn.active {
            background: linear-gradient(45deg, #d4669a, #cd853f);
            color: white;
        }
        
        .countdown-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .time-unit {
            background: linear-gradient(45deg, #d4669a, #cd853f);
            color: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #8b4513;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .time-unit:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(212, 102, 154, 0.6);
        }
        
        .time-number {
            font-size: 20px;
            display: block;
            margin-bottom: 5px;
        }
        
        .time-label {
            font-size: 8px;
        }
        
        /* Love Meter */
        .love-meter-container {
            margin: 15px 0;
        }
        
        .love-meter-bar {
            width: 100%;
            height: 30px;
            background: linear-gradient(45deg, #f5e6d3, #ffc0cb);
            border: 3px solid #d4669a;
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s ease;
            margin: 10px 0;
        }
        
        .love-meter-fill {
            height: 100%;
            background: linear-gradient(45deg, #ff69b4, #d4669a, #ffc0cb);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 12px;
        }
        
        .love-meter-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 8px;
            color: #8b4513;
            font-weight: bold;
            text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.8);
            pointer-events: none;
            z-index: 2;
        }
        
        /* Love Popup */
        .love-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .love-popup-content {
            background: linear-gradient(45deg, #ff69b4, #ffc0cb, #ffb6c1);
            border: 4px solid #d4669a;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            position: relative;
            animation: lovePopupAppear 0.8s ease;
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.8);
            max-width: 400px;
            width: 90%;
        }
        
        @keyframes lovePopupAppear {
            0% { transform: scale(0.3) rotate(-15deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(5deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .love-popup-title {
            font-size: 18px;
            color: white;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0px #d4669a;
        }
        
        .love-popup-message {
            font-size: 12px;
            color: white;
            line-height: 1.6;
            margin: 20px 0;
            text-shadow: 1px 1px 0px rgba(212, 102, 154, 0.8);
        }
        
        .love-popup-close {
            background: #d4669a;
            color: white;
            border: 2px solid #8b4513;
            border-radius: 10px;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        /* Music Player */
        .music-container {
            text-align: center;
        }
        
        .vinyl-record {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle at center, 
                #d4669a 0%, #d4669a 8%,
                #333 8%, #333 10%,
                #222 10%, #222 12%,
                #333 12%, #333 14%,
                #222 14%, #222 16%,
                #333 16%, #333 18%,
                #222 18%, #222 20%,
                #333 20%, #333 22%,
                #222 22%, #222 24%,
                #333 24%, #333 26%,
                #222 26%, #222 28%,
                #333 28%, #333 30%,
                #222 30%, #222 32%,
                #333 32%, #333 34%,
                #222 34%, #222 36%,
                #333 36%, #333 38%,
                #222 38%, #222 40%,
                #333 40%, #333 42%,
                #222 42%, #222 44%,
                #333 44%, #333 46%,
                #222 46%, #222 48%,
                #333 48%, #333 50%,
                #222 50%, #222 52%,
                #333 52%, #333 54%,
                #222 54%, #222 56%,
                #333 56%, #333 58%,
                #222 58%, #222 60%,
                #333 60%, #333 62%,
                #222 62%, #222 64%,
                #333 64%, #333 66%,
                #222 66%, #222 68%,
                #333 68%, #333 70%,
                #222 70%, #222 72%,
                #333 72%, #333 74%,
                #222 74%, #222 76%,
                #333 76%, #333 78%,
                #222 78%, #222 80%,
                #333 80%, #333 82%,
                #222 82%, #222 84%,
                #333 84%, #333 86%,
                #222 86%, #222 88%,
                #333 88%, #333 90%,
                #222 90%, #222 92%,
                #333 92%, #333 94%,
                #222 94%, #222 96%,
                #333 96%, #333 100%
            );
            border-radius: 50%;
            border: 4px solid #000;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            user-select: none;
            margin: 20px auto;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5), 0 4px 15px rgba(0,0,0,0.3);
        }
        
        .vinyl-record::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: #d4669a;
            border-radius: 50%;
            border: 2px solid #8b4513;
        }
        
        .vinyl-record::after {
            content: '‚ô•';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 16px;
            font-weight: bold;
            z-index: 1;
        }
        
        .vinyl-record:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
        }
        
        .unlock-progress {
            width: 250px;
            height: 8px;
            background: #f5e6d3;
            border: 2px solid #deb887;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px auto;
        }
        
        .unlock-bar {
            height: 100%;
            background: linear-gradient(45deg, #ff69b4, #ffc0cb);
            width: 0%;
            transition: width 0.1s ease;
        }
        
        .music-player {
            background: linear-gradient(45deg, #ffc0cb, #d4a574);
            border: 3px solid #deb887;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            display: none;
            margin-top: 20px;
        }
        
        .music-player.unlocked {
            display: block;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .control-btn {
            background: linear-gradient(45deg, #d4669a, #cd853f);
            border: 2px solid #8b4513;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            transition: all 0.3s ease;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #f5e6d3;
            border: 2px solid #8b4513;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(45deg, #d4669a, #cd853f);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Love Stats */
        .love-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #d4a574;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 14px;
            color: #d4669a;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 7px;
            color: #8b4513;
        }
        
        /* Photo Gallery */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            padding: 20px;
        }
        
        /* Milestone System */
        .milestone-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 192, 203, 0.3);
            border: 3px solid #d4a574;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .next-milestone-countdown {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #d4669a;
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            border: 2px solid #d4a574;
        }
        
        .milestone-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .milestone-tab {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #d4a574;
            padding: 10px 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            color: #8b4513;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .milestone-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .milestone-tab.active {
            background: linear-gradient(45deg, #d4669a, #cd853f);
            color: white;
            border-color: #8b4513;
        }
        
        .tab-icon {
            image-rendering: pixelated;
        }
        
        .year-selector {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            border: 2px solid #d4a574;
        }
        
        .milestone-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 20px;
        }
        
        @media (min-width: 768px) {
            .milestone-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .milestone-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }
        
        .milestone-item {
            background: linear-gradient(135deg, #f8f4f0 0%, #ffeef0 30%, #fff5f8 70%, #f5e6d3 100%);
            border: 3px solid #d4a574;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(212, 166, 116, 0.15), 0 2px 8px rgba(0,0,0,0.08);
            backdrop-filter: blur(10px);
        }
        
        .milestone-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.3) 0%, transparent 50%, rgba(255, 255, 255, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .milestone-item:hover::before {
            opacity: 1;
        }
        
        .milestone-item:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 12px 40px rgba(212, 102, 154, 0.25), 0 8px 16px rgba(0,0,0,0.12);
            border-color: #ff69b4;
        }
        
        .milestone-item.unlocked {
            background: linear-gradient(135deg, #ff69b4 0%, #ff8fa3 25%, #ffc0cb 50%, #ffb6c1 75%, #ffa8cc 100%);
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
            border-color: #e91e63;
            box-shadow: 0 6px 25px rgba(255, 105, 180, 0.3), 0 3px 12px rgba(0,0,0,0.15);
        }
        
        .milestone-item.unlocked:hover {
            box-shadow: 0 15px 50px rgba(255, 105, 180, 0.4), 0 10px 20px rgba(0,0,0,0.2);
            border-color: #c2185b;
        }
        
        .milestone-lock {
            width: 32px;
            height: 32px;
            margin: 0 auto 10px;
            image-rendering: pixelated;
            transition: all 0.3s ease;
        }
        
        .milestone-item.unlocked .milestone-lock {
            transform: rotate(15deg) scale(1.1);
        }
        
        .milestone-title {
            font-size: 10px;
            color: #8b4513;
            margin-bottom: 12px;
            font-weight: bold;
            line-height: 1.3;
            letter-spacing: 0.5px;
        }
        
        .milestone-item.unlocked .milestone-title {
            color: white;
            font-size: 11px;
        }
        
        .milestone-countdown {
            font-size: 8px;
            color: #a0522d;
            font-style: italic;
            background: rgba(255, 255, 255, 0.7);
            padding: 4px 8px;
            border-radius: 12px;
            display: inline-block;
            margin-top: 5px;
        }
        
        .milestone-item.unlocked .milestone-countdown {
            color: rgba(255, 255, 255, 0.95);
            background: rgba(255, 255, 255, 0.2);
            font-weight: bold;
        }
        
        /* Modal System */
        .milestone-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .milestone-modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #fef9ff 20%, #fff5f8 40%, #f8f0ff 60%, #fff0f5 80%, #faf5ff 100%);
            border: 5px solid transparent;
            background-clip: padding-box;
            border-radius: 30px;
            padding: 0;
            max-width: 650px;
            width: 95%;
            text-align: center;
            position: relative;
            animation: modalAppear 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 
                0 25px 80px rgba(255, 105, 180, 0.25),
                0 15px 40px rgba(212, 102, 154, 0.2),
                0 5px 15px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(20px);
        }
        
        .milestone-modal-content::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(45deg, #ff69b4, #ffc0cb, #ffb6c1, #dda0dd, #ff69b4);
            border-radius: 35px;
            z-index: -1;
            animation: borderGlow 3s ease-in-out infinite;
        }
        
        @keyframes borderGlow {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }
        
        @keyframes modalAppear {
            0% { 
                transform: scale(0.7) translateY(-30px) rotate(-5deg); 
                opacity: 0; 
                box-shadow: 0 0 0 rgba(212, 102, 154, 0), 0 0 0 rgba(0,0,0,0);
            }
            50% {
                transform: scale(1.02) translateY(-5px) rotate(1deg);
                opacity: 0.8;
            }
            100% { 
                transform: scale(1) translateY(0) rotate(0deg); 
                opacity: 1; 
                box-shadow: 0 20px 60px rgba(212, 102, 154, 0.3), 0 8px 25px rgba(0,0,0,0.15);
            }
        }
        
        .milestone-modal-header {
            background: linear-gradient(135deg, #ff1493 0%, #ff69b4 25%, #ffc0cb 50%, #ffb6c1 75%, #dda0dd 100%);
            padding: 30px 35px;
            border-radius: 25px 25px 0 0;
            position: relative;
            box-shadow: 
                0 8px 25px rgba(255, 105, 180, 0.3),
                0 4px 15px rgba(255, 20, 147, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            overflow: hidden;
        }
        
        .milestone-modal-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: headerShimmer 4s ease-in-out infinite;
        }
        
        @keyframes headerShimmer {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: -100%; }
        }
        
        .milestone-modal-close {
            position: absolute;
            top: 20px;
            right: 25px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 240, 248, 0.9) 100%);
            color: #e91e63;
            border: 3px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 6px 20px rgba(233, 30, 99, 0.2),
                0 3px 10px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            z-index: 10;
        }
        
        .milestone-modal-close:hover {
            background: linear-gradient(135deg, #ffffff 0%, #fff0f8 100%);
            transform: scale(1.15) rotate(180deg);
            box-shadow: 
                0 10px 30px rgba(233, 30, 99, 0.4),
                0 5px 15px rgba(0,0,0,0.15),
                inset 0 2px 0 rgba(255, 255, 255, 0.9);
            border-color: rgba(255, 255, 255, 1);
        }
        
        .milestone-modal-close:active {
            transform: scale(1.05) rotate(180deg);
        }
        
        .milestone-modal-title {
            font-size: 16px;
            color: white;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            line-height: 1.3;
        }
        
        .milestone-modal-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto;
            image-rendering: pixelated;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        
        .milestone-modal-body {
            padding: 35px 40px;
            flex: 1;
            overflow-y: auto;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 240, 248, 0.1) 100%);
        }
        
        .milestone-message-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 248, 252, 0.9) 50%, rgba(248, 240, 255, 0.9) 100%);
            border: 3px solid transparent;
            background-clip: padding-box;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 
                0 8px 25px rgba(255, 105, 180, 0.1),
                0 4px 15px rgba(0,0,0,0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }
        
        .milestone-message-card::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(45deg, rgba(255, 105, 180, 0.3), rgba(255, 192, 203, 0.2), rgba(221, 160, 221, 0.3));
            border-radius: 23px;
            z-index: -1;
        }
        
        .milestone-date-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ff1493 0%, #ff69b4 25%, #ffc0cb 75%, #dda0dd 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            box-shadow: 
                0 6px 20px rgba(255, 105, 180, 0.4),
                0 3px 10px rgba(255, 20, 147, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .milestone-date-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: badgeShimmer 3s ease-in-out infinite;
        }
        
        @keyframes badgeShimmer {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: -100%; }
        }
        
        .milestone-countdown-live {
            background: linear-gradient(135deg, #fff0f8 0%, #f0f4ff 100%);
            border: 2px solid #ff69b4;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-size: 12px;
            color: #8b4513;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .milestone-countdown-live::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .memory-section {
            margin-top: 0;
            text-align: left;
        }
        
        .memory-input-area {
            background: linear-gradient(135deg, #fff8fc 0%, #f8f4ff 50%, #fff0f8 100%);
            border: 3px solid transparent;
            background-clip: padding-box;
            border-radius: 25px;
            padding: 30px;
            margin-top: 0;
            box-shadow: 
                0 8px 25px rgba(255, 105, 180, 0.1),
                0 4px 15px rgba(0,0,0,0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }
        
        .memory-input-area::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(45deg, rgba(255, 105, 180, 0.2), rgba(255, 192, 203, 0.15), rgba(221, 160, 221, 0.2));
            border-radius: 28px;
            z-index: -1;
        }
        
        .memory-textarea {
            width: 100%;
            min-height: 100px;
            border: 2px solid rgba(212, 102, 154, 0.3);
            border-radius: 12px;
            padding: 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 9px;
            color: #8b4513;
            background: rgba(255, 255, 255, 0.8);
            resize: vertical;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            line-height: 1.6;
        }
        
        .memory-textarea:focus {
            border-color: #ff69b4;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.2);
            outline: none;
        }
        
        .photo-upload-area {
            border: 3px dashed rgba(212, 102, 154, 0.4);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 240, 248, 0.6) 100%);
            position: relative;
            overflow: hidden;
        }
        
        .photo-upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 105, 180, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .photo-upload-area:hover::before {
            left: 100%;
        }
        
        .photo-upload-area:hover {
            border-color: #ff69b4;
            background: linear-gradient(135deg, rgba(255, 192, 203, 0.3) 0%, rgba(255, 105, 180, 0.2) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.15);
        }
        
        .photo-upload-area.dragover {
            border-color: #ff1493;
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.3) 0%, rgba(255, 20, 147, 0.2) 100%);
            transform: scale(1.02);
        }
        
        .uploaded-photo {
            max-width: 100%;
            max-height: 250px;
            border-radius: 15px;
            margin: 15px auto;
            object-fit: cover;
            display: block;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border: 3px solid rgba(255, 255, 255, 0.8);
        }
        
        .memory-display {
            background: linear-gradient(135deg, #fff8fc 0%, #f8f4ff 100%);
            border: 2px solid rgba(212, 102, 154, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin-top: 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        
        .memory-text {
            font-size: 10px;
            line-height: 1.8;
            color: #8b4513;
            margin: 20px 0;
            text-align: center;
            background: rgba(255, 255, 255, 0.6);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(212, 102, 154, 0.2);
        }
        
        .edit-memory-btn {
            background: linear-gradient(135deg, #ff69b4 0%, #ffc0cb 100%);
            border: 2px solid rgba(255, 255, 255, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto 0;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .edit-memory-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.4);
            background: linear-gradient(135deg, #ff1493 0%, #ff69b4 100%);
        }
        
        .save-memory-btn {
            background: linear-gradient(135deg, #ff1493 0%, #ff69b4 25%, #ffc0cb 75%, #dda0dd 100%);
            border: 3px solid rgba(255, 255, 255, 0.9);
            color: white;
            padding: 18px 35px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 12px;
            justify-content: center;
            margin: 0 auto;
            width: fit-content;
            box-shadow: 
                0 8px 25px rgba(255, 20, 147, 0.4),
                0 4px 15px rgba(212, 102, 154, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }
        
        .save-memory-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }
        
        .save-memory-btn:hover::before {
            left: 100%;
        }
        
        .save-memory-btn:hover {
            transform: translateY(-4px) scale(1.08);
            box-shadow: 
                0 12px 35px rgba(255, 20, 147, 0.5),
                0 6px 20px rgba(212, 102, 154, 0.4),
                inset 0 2px 0 rgba(255, 255, 255, 0.4);
            background: linear-gradient(135deg, #e91e63 0%, #ff1493 25%, #ff69b4 75%, #c2185b 100%);
        }
        
        .save-memory-btn:active {
            transform: translateY(-2px) scale(1.05);
        }
        
        /* Sparkle and Confetti Animations */
        .sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ff69b4;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkleFloat 1s ease-out forwards;
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            animation: confettiFall 3s ease-out forwards;
        }
        
        @keyframes confettiFall {
            0% {
                opacity: 1;
                transform: translateY(-100vh) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(360deg);
            }
        }
        
        .photo-card {
            background: linear-gradient(135deg, #faf7ff 0%, #f0f4ff 30%, #fff0f8 70%, #fef7f0 100%);
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .photo-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.15);
        }
        
        .photo-controls {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: all 0.4s ease;
            z-index: 10;
        }
        
        .photo-card:hover .photo-controls {
            top: 15px;
            opacity: 1;
        }
        
        .control-button {
            background: linear-gradient(135deg, #ff69b4, #ffc0cb);
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
        }
        
        .photo-placeholder {
            aspect-ratio: 4/3;
            background: linear-gradient(135deg, #e8f4fd 0%, #fce4ec 50%, #fff3e0 100%);
            border: 2px dashed rgba(212, 102, 154, 0.3);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: #8b4513;
            text-align: center;
            cursor: pointer;
            margin-bottom: 15px;
        }
        
        .photo-caption {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(212, 102, 154, 0.2);
            border-radius: 12px;
            padding: 12px;
            margin-top: 15px;
        }
        
        .caption-label-input {
            width: 100%;
            background: transparent;
            border: none;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            color: #d4669a;
            margin-bottom: 8px;
            outline: none;
            padding: 4px 0;
        }
        
        .caption-input {
            width: 100%;
            background: transparent;
            border: none;
            font-family: 'Press Start 2P', cursive;
            font-size: 7px;
            color: #8b4513;
            line-height: 1.6;
            resize: none;
            outline: none;
            min-height: 40px;
        }
        
        @media (max-width: 768px) {
            .nav-menu {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 200px;
            }
            
            .countdown-display {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ô• Our Love Story ‚ô•</h1>
            <p style="font-size: 10px; margin-top: 10px;">A pixel-perfect journey of us</p>
        </div>
        
        <div class="nav-menu">
            <button class="nav-btn active" onclick="showSection('memory-books')">Memory Books</button>
            <button class="nav-btn" onclick="showSection('countdown')">Countdown Timer</button>
            <button class="nav-btn" onclick="showSection('music-player')">Music Player</button>
            <button class="nav-btn" onclick="showSection('photo-gallery')">Photo Gallery</button>
            <button class="nav-btn" onclick="showSection('love-vault')">Love Vault</button>
        </div>
        
        <!-- Memory Books Section -->
        <div id="memory-books" class="section active">
            <h2>‚ô• Our Memory Books ‚ô•</h2>
            <div class="book-grid">
                <div class="book-item" onclick="openBook('first-date')">
                    <div class="book-cover">
                        <div class="book-spine"></div>
                        <div class="book-icon">üíï</div>
                        <div class="book-title">First Date Adventures</div>
                        <div class="book-description">Click to open!</div>
                    </div>
                </div>
                <div class="book-item" onclick="openBook('travel')">
                    <div class="book-cover">
                        <div class="book-spine"></div>
                        <div class="book-icon">‚úàÔ∏è</div>
                        <div class="book-title">Travel Together</div>
                        <div class="book-description">Click to open!</div>
                    </div>
                </div>
                <div class="book-item" onclick="openBook('special')">
                    <div class="book-cover">
                        <div class="book-spine"></div>
                        <div class="book-icon">‚≠ê</div>
                        <div class="book-title">Special Moments</div>
                        <div class="book-description">Click to open!</div>
                    </div>
                </div>
                <div class="book-item" onclick="openBook('future')">
                    <div class="book-cover">
                        <div class="book-spine"></div>
                        <div class="book-icon">üåü</div>
                        <div class="book-title">Future Dreams</div>
                        <div class="book-description">Click to open!</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Countdown Timer Section -->
        <div id="countdown" class="section">
            <h2>‚ô• Our Love Timeline ‚ô•</h2>
            <div class="countdown-container">
                <div class="special-date-info">
                    <div style="font-size: 12px; color: #d4669a; margin-bottom: 10px;">March 6, 2025</div>
                    
                    <div class="love-meter-container">
                        <div style="font-size: 10px; color: #8b4513; margin-bottom: 10px;">‚ô• Love Meter ‚ô•</div>
                        <div class="love-meter-bar" onclick="addLove()">
                            <div class="love-meter-fill" id="loveMeterFill"></div>
                            <div class="love-meter-text" id="loveMeterText">Click to fill with love!</div>
                        </div>
                        <div style="text-align: center; margin-top: 8px;">
                            <span style="font-size: 8px; color: #d4669a;">Love Clicks: </span>
                            <span id="loveCount" style="font-size: 8px; color: #8b4513;">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="countdown-mode-toggle">
                    <button class="mode-btn active" id="togetherBtn" onclick="switchMode('together')">Time Together</button>
                    <button class="mode-btn" id="anniversaryBtn" onclick="switchMode('anniversary')">Next Anniversary</button>
                </div>
                
                <div class="countdown-display">
                    <div class="time-unit" onclick="celebrateUnit('years')">
                        <span class="time-number" id="years">0</span>
                        <span class="time-label">Years</span>
                    </div>
                    <div class="time-unit" onclick="celebrateUnit('months')">
                        <span class="time-number" id="months">0</span>
                        <span class="time-label">Months</span>
                    </div>
                    <div class="time-unit" onclick="celebrateUnit('days')">
                        <span class="time-number" id="days">0</span>
                        <span class="time-label">Days</span>
                    </div>
                    <div class="time-unit" onclick="celebrateUnit('hours')">
                        <span class="time-number" id="hours">0</span>
                        <span class="time-label">Hours</span>
                    </div>
                    <div class="time-unit" onclick="celebrateUnit('minutes')">
                        <span class="time-number" id="minutes">0</span>
                        <span class="time-label">Minutes</span>
                    </div>
                    <div class="time-unit" onclick="celebrateUnit('seconds')">
                        <span class="time-number" id="seconds">0</span>
                        <span class="time-label">Seconds</span>
                    </div>
                </div>
                
                <div class="love-stats">
                    <div class="stat-item">
                        <div class="stat-number" id="totalDays">0</div>
                        <div class="stat-label">Total Days</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalHours">0</div>
                        <div class="stat-label">Total Hours</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="heartbeats">0</div>
                        <div class="stat-label">‚ô• Heartbeats ‚ô•</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Music Player Section -->
        <div id="music-player" class="section">
            <h2>‚ô• Our Songs ‚ô•</h2>
            <div class="music-container">
                <div class="vinyl-unlock" id="vinylUnlock">
                    <div style="font-size: 10px; color: #8b4513; margin-bottom: 15px;">Hold the vinyl record to unlock our playlist!</div>
                    <div class="vinyl-record" id="vinylRecord" 
                         onmousedown="startUnlock()" 
                         onmouseup="stopUnlock()" 
                         onmouseleave="stopUnlock()">
                    </div>
                    <div class="unlock-progress">
                        <div class="unlock-bar" id="unlockBar"></div>
                    </div>
                    <div style="font-size: 8px; color: #8b4513;">Hold for 3 seconds to unlock</div>
                </div>
                
                <div class="music-player" id="musicPlayer">
                    <div style="margin-bottom: 20px;">
                        <div id="currentSong" style="font-size: 12px; color: #8b4513; margin-bottom: 5px;">Our Song - Love Melody</div>
                        <div style="font-size: 8px; color: #8b4513;">Now Playing</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <div class="controls">
                        <button class="control-btn" onclick="previousSong()">‚èÆÔ∏è Prev</button>
                        <button class="control-btn" id="playBtn" onclick="togglePlay()">‚ñ∂Ô∏è Play</button>
                        <button class="control-btn" onclick="nextSong()">‚è≠Ô∏è Next</button>
                    </div>
                    
                    <button style="background: linear-gradient(45deg, #ff69b4, #ffc0cb); border: 2px solid #8b4513; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-family: 'Press Start 2P', cursive; font-size: 8px; margin-top: 15px;" onclick="lockMusic()">üîí Lock Again</button>
                </div>
            </div>
        </div>
        
        <!-- Photo Gallery Section -->
        <div id="photo-gallery" class="section">
            <h2>‚ô• Our Photo Gallery ‚ô•</h2>
            <div style="text-align: center; margin-bottom: 20px;">
                <button class="nav-btn" onclick="addNewPhotoCard()" style="background: linear-gradient(45deg, #ff69b4, #ffc0cb); color: white;">
                    ‚ûï Add New Photo
                </button>
            </div>
            <div class="photo-grid">
                <div class="photo-card">
                    <div class="photo-controls">
                        <div class="control-button" onclick="addSparkle(this)" title="Add Love">üíï</div>
                        <div class="control-button" onclick="editPhoto(this)" title="Edit">‚úèÔ∏è</div>
                    </div>
                    <div class="photo-placeholder" onclick="uploadPhoto(this)">
                        <div>üì∏<br>Click to Upload<br>Photo</div>
                    </div>
                    <div class="photo-caption">
                        <input type="text" class="caption-label-input" placeholder="Add a title..." />
                        <textarea class="caption-input" placeholder="Write your memory here..."></textarea>
                    </div>
                </div>
                
                <div class="photo-card">
                    <div class="photo-controls">
                        <div class="control-button" onclick="addSparkle(this)" title="Add Love">üíï</div>
                        <div class="control-button" onclick="editPhoto(this)" title="Edit">‚úèÔ∏è</div>
                    </div>
                    <div class="photo-placeholder" onclick="uploadPhoto(this)">
                        <div>üì∏<br>Click to Upload<br>Photo</div>
                    </div>
                    <div class="photo-caption">
                        <input type="text" class="caption-label-input" placeholder="Add a title..." />
                        <textarea class="caption-input" placeholder="Write your memory here..."></textarea>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Love Vault Section -->
        <div id="love-vault" class="section">
            <div class="milestone-header">
            <h2>‚ô• Love Milestone Vault ‚ô•</h2>
                <p style="font-size: 10px; color: #8b4513; margin-bottom: 15px;">Celebrating our journey since March 6, 2025</p>
                <div class="next-milestone-countdown">
                    <canvas id="countdownIcon" width="16" height="16" style="image-rendering: pixelated; margin-right: 8px;"></canvas>
                    <span id="nextMilestoneText">Next unlock in: Loading...</span>
                </div>
            </div>
            
            <div class="milestone-navigation">
                <button class="milestone-tab active" data-category="monthly" onclick="switchMilestoneCategory('monthly')">
                    <canvas class="tab-icon" width="16" height="16"></canvas>
                    Monthly
                </button>
                <button class="milestone-tab" data-category="early" onclick="switchMilestoneCategory('early')">
                    <canvas class="tab-icon" width="16" height="16"></canvas>
                    Early Years
                </button>
                <button class="milestone-tab" data-category="golden" onclick="switchMilestoneCategory('golden')">
                    <canvas class="tab-icon" width="16" height="16"></canvas>
                    Golden Years
                </button>
                <button class="milestone-tab" data-category="lifetime" onclick="switchMilestoneCategory('lifetime')">
                    <canvas class="tab-icon" width="16" height="16"></canvas>
                    Lifetime
                </button>
            </div>
            
            <div class="year-selector" id="yearSelector" style="display: none;">
                <label for="yearSelect" style="font-size: 8px; color: #8b4513; margin-right: 10px;">Select Year:</label>
                <select id="yearSelect" onchange="filterByYear()" style="font-family: 'Press Start 2P', cursive; font-size: 8px; padding: 5px; border: 2px solid #d4a574; border-radius: 5px; background: #f5e6d3;">
                    <!-- Years will be populated by JavaScript -->
                </select>
            </div>
            
            <div class="milestone-grid" id="milestoneGrid">
                <!-- Milestones will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Book Popups -->
    <div id="first-date-popup" class="book-popup">
        <div class="popup-content">
            <div class="popup-close" onclick="closeBook('first-date-popup')">√ó</div>
            <div class="popup-title">First Date Adventures</div>
            <div class="popup-photo">
                <div>ü•∞<br>Our First<br>Coffee Date</div>
            </div>
            <div class="popup-message">
                I still remember how nervous I was before our first date! You looked absolutely beautiful, and I couldn't believe someone as amazing as you wanted to spend time with me. That little coffee shop will always be special to us - it's where our love story truly began.
            </div>
        </div>
    </div>
    
    <div id="travel-popup" class="book-popup">
        <div class="popup-content">
            <div class="popup-close" onclick="closeBook('travel-popup')">√ó</div>
            <div class="popup-title">Travel Together</div>
            <div class="popup-photo">
                <div>üèñÔ∏è<br>Beach<br>Paradise</div>
            </div>
            <div class="popup-message">
                Every adventure is better with you by my side! From spontaneous road trips to planned vacations, we've created the most beautiful memories together. Here's to many more adventures around the world! üåçüíï
            </div>
        </div>
    </div>
    
    <div id="special-popup" class="book-popup">
        <div class="popup-content">
            <div class="popup-close" onclick="closeBook('special-popup')">√ó</div>
            <div class="popup-title">Special Moments</div>
            <div class="popup-photo">
                <div>üåô<br>Stargazing<br>Night</div>
            </div>
            <div class="popup-message">
                It's not just the big moments that make us special - it's all the little things too. Dancing in the kitchen, falling asleep watching movies together, your sleepy morning voice. These everyday moments with you are what make life so beautiful. üåüüíï
            </div>
        </div>
    </div>
    
    <div id="future-popup" class="book-popup">
        <div class="popup-content">
            <div class="popup-close" onclick="closeBook('future-popup')">√ó</div>
            <div class="popup-title">Future Dreams</div>
            <div class="popup-photo">
                <div>üè°<br>Our Dream<br>Home</div>
            </div>
            <div class="popup-message">
                I can't wait to build our future together! I dream of lazy Sunday mornings in our own home, maybe a little garden where we can grow flowers together. You're my forever person, and I'm so excited for everything that's coming our way! üíïüåà
            </div>
        </div>
    </div>
    
    <!-- Love Popup -->
    <div id="lovePopup" class="love-popup">
        <div class="love-popup-content">
            <div class="love-popup-title">I LOVE YOU BABY!</div>
            <div class="love-popup-message">
                I'm so lucky to have the best boyfriend ever.<br>
                I love you, my love!
            </div>
            <button class="love-popup-close" onclick="closeLovePopup()">Close üíï</button>
        </div>
    </div>
    
    <!-- Milestone Modal -->
    <div id="milestoneModal" class="milestone-modal">
        <div class="milestone-modal-content">
            <div class="milestone-modal-header">
                <div class="milestone-modal-close" onclick="closeMilestoneModal()">√ó</div>
                <div class="milestone-modal-title" id="modalTitle">Milestone Title</div>
                <canvas class="milestone-modal-icon" id="modalIcon" width="80" height="80"></canvas>
            </div>
            <div class="milestone-modal-body">
                <div class="milestone-message-card">
                    <div class="milestone-date-badge" id="modalDateBadge" style="display: none;"></div>
                    <div id="modalMessage" style="font-size: 11px; color: #8b4513; line-height: 1.8; margin: 0;"></div>
                </div>
                <div id="modalCountdown" class="milestone-countdown-live" style="display: none;"></div>
                <div id="memorySection" class="memory-section" style="display: none;">
                    <div id="memoryDisplay" class="memory-display" style="display: none;">
                        <div id="memoryText" class="memory-text"></div>
                        <img id="memoryPhoto" class="uploaded-photo" style="display: none;" />
                        <button class="edit-memory-btn" onclick="editMemory()">
                            ‚úèÔ∏è Edit Memory
                        </button>
                    </div>
                    <div id="memoryInput" class="memory-input-area" style="display: none;">
                        <div class="photo-upload-area" id="photoUploadArea" onclick="selectPhoto()">
                            <div id="uploadText">üì∏ Click to upload photo or drag & drop</div>
                            <img id="previewPhoto" class="uploaded-photo" style="display: none;" />
                        </div>
                        <textarea id="memoryTextarea" class="memory-textarea" placeholder="Write your memory for this special milestone..."></textarea>
                        <button class="save-memory-btn" onclick="saveMemory()">
                            ‚ô• Save Memory ‚ô•
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables
        let countdownMode = 'together';
        let loveClicks = 0;
        let lovePercentage = 0;
        let hasShownPopup = false;
        let isPlaying = false;
        let currentSongIndex = 0;
        let progressInterval;
        let unlockInterval;
        let unlockProgress = 0;
        let isUnlocked = false;
        
        const specialDate = new Date('2025-03-06');
        const songs = [
            "üéµ Our Song - Love Melody",
            "üíï First Dance - Romance", 
            "üåü Together Forever - Harmony",
            "üí§ Sweet Dreams - Lullaby",
            "‚òÄÔ∏è Morning Coffee - Acoustic",
            "üåô Midnight Talks - Soft Pop"
        ];
        
        // Navigation functionality
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Remove active class from all nav buttons
            const navBtns = document.querySelectorAll('.nav-btn');
            navBtns.forEach(btn => btn.classList.remove('active'));
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }
        
        // Book functions
        function openBook(bookType) {
            const popupId = bookType + '-popup';
            const popup = document.getElementById(popupId);
            popup.style.display = 'flex';
        }
        
        function closeBook(popupId) {
            const popup = document.getElementById(popupId);
            popup.style.display = 'none';
        }
        
        // Countdown Timer functionality
        function updateCountdown() {
            const now = new Date();
            let diff;
            
            if (countdownMode === 'together') {
                if (specialDate > now) {
                    diff = specialDate - now;
                    document.querySelector('.special-date-info div:first-child').textContent = 'Countdown to March 6, 2025';
                } else {
                    diff = now - specialDate;
                    document.querySelector('.special-date-info div:first-child').textContent = 'Together Since March 6, 2025';
                }
            } else {
                const nextAnniversary = new Date(now.getFullYear(), 2, 6); // March 6th
                if (nextAnniversary <= now) {
                    nextAnniversary.setFullYear(now.getFullYear() + 1);
                }
                diff = nextAnniversary - now;
                document.querySelector('.special-date-info div:first-child').textContent = 'Next Anniversary';
            }
            
            const years = Math.floor(diff / (365.25 * 24 * 60 * 60 * 1000));
            const months = Math.floor((diff % (365.25 * 24 * 60 * 60 * 1000)) / (30.44 * 24 * 60 * 60 * 1000));
            const days = Math.floor((diff % (30.44 * 24 * 60 * 60 * 1000)) / (24 * 60 * 60 * 1000));
            const hours = Math.floor((diff % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
            const minutes = Math.floor((diff % (60 * 60 * 1000)) / (60 * 1000));
            const seconds = Math.floor((diff % (60 * 1000)) / 1000);
            
            document.getElementById('years').textContent = years;
            document.getElementById('months').textContent = months;
            document.getElementById('days').textContent = days;
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;
            
            // Update love stats - calculate from March 6, 2025 regardless of mode
            const timeSinceSpecialDate = Math.abs(now - specialDate);
            const totalDays = Math.floor(timeSinceSpecialDate / (24 * 60 * 60 * 1000));
            const totalHours = Math.floor(timeSinceSpecialDate / (60 * 60 * 1000));
            const totalMinutes = Math.floor(timeSinceSpecialDate / (60 * 1000));
            const heartbeats = Math.floor(totalMinutes * 70); // 70 beats per minute
            
            document.getElementById('totalDays').textContent = totalDays.toLocaleString();
            document.getElementById('totalHours').textContent = totalHours.toLocaleString();
            document.getElementById('heartbeats').textContent = heartbeats.toLocaleString();
        }
        
        function switchMode(mode) {
            countdownMode = mode;
            document.getElementById('togetherBtn').classList.toggle('active', mode === 'together');
            document.getElementById('anniversaryBtn').classList.toggle('active', mode === 'anniversary');
            updateCountdown();
        }
        
        function celebrateUnit(unit) {
            const unitElement = document.querySelector(`#${unit}`).parentElement;
            unitElement.style.transform = 'scale(1.1)';
            unitElement.style.boxShadow = '0 0 30px rgba(255, 105, 180, 0.8)';
            
            setTimeout(() => {
                unitElement.style.transform = '';
                unitElement.style.boxShadow = '';
            }, 600);
            
            showMessage(getLoveMessage(unit));
        }
        
        function getLoveMessage(unit) {
            const messages = {
                years: "I love you so much, baby!",
                months: "You're the best boyfriend ever!",
                days: "I'm so blessed to have you!",
                hours: "Mahal na mahal kita!",
                minutes: "You're everything I prayed for!",
                seconds: "Forever and always yours!"
            };
            return messages[unit] || "I love you!";
        }
        
        // Love Meter functionality
        function addLove() {
            loveClicks++;
            lovePercentage = Math.min(loveClicks * 1, 100);
            
            document.getElementById('loveCount').textContent = loveClicks;
            
            const loveFill = document.getElementById('loveMeterFill');
            loveFill.style.width = lovePercentage + '%';
            
            const loveText = document.getElementById('loveMeterText');
            if (lovePercentage < 20) {
                loveText.textContent = 'Keep clicking! üíï';
            } else if (lovePercentage < 40) {
                loveText.textContent = 'Love is growing! üíñ';
            } else if (lovePercentage < 60) {
                loveText.textContent = 'So much love! üíó';
            } else if (lovePercentage < 80) {
                loveText.textContent = 'Overflowing with love! üíù';
            } else if (lovePercentage < 100) {
                loveText.textContent = 'Almost full of love! üíû';
            } else {
                loveText.textContent = 'LOVE METER MAXED! üíï‚ú®';
            }
            
            if (lovePercentage === 100 && !hasShownPopup) {
                hasShownPopup = true;
                setTimeout(() => {
                    showLovePopup();
                }, 500);
            }
        }
        
        function showLovePopup() {
            document.getElementById('lovePopup').style.display = 'flex';
        }
        
        function closeLovePopup() {
            document.getElementById('lovePopup').style.display = 'none';
            loveClicks = 0;
            lovePercentage = 0;
            hasShownPopup = false;
            document.getElementById('loveCount').textContent = loveClicks;
            document.getElementById('loveMeterFill').style.width = '0%';
            document.getElementById('loveMeterText').textContent = 'Click to fill with love!';
        }
        
        // Music Player functionality
        function startUnlock() {
            if (isUnlocked) return;
            
            const vinyl = document.getElementById('vinylRecord');
            const unlockBar = document.getElementById('unlockBar');
            
            vinyl.style.animation = 'spin 2s linear infinite';
            
            unlockInterval = setInterval(() => {
                unlockProgress += 2;
                unlockBar.style.width = unlockProgress + '%';
                
                if (unlockProgress >= 100) {
                    clearInterval(unlockInterval);
                    unlockMusic();
                }
            }, 60);
        }
        
        function stopUnlock() {
            if (isUnlocked) return;
            
            const vinyl = document.getElementById('vinylRecord');
            const unlockBar = document.getElementById('unlockBar');
            
            vinyl.style.animation = '';
            clearInterval(unlockInterval);
            unlockProgress = 0;
            unlockBar.style.width = '0%';
        }
        
        function unlockMusic() {
            const vinylUnlock = document.getElementById('vinylUnlock');
            const musicPlayer = document.getElementById('musicPlayer');
            
            setTimeout(() => {
                vinylUnlock.style.display = 'none';
                musicPlayer.classList.add('unlocked');
                isUnlocked = true;
            }, 1000);
        }
        
        function lockMusic() {
            const vinylUnlock = document.getElementById('vinylUnlock');
            const musicPlayer = document.getElementById('musicPlayer');
            
            isUnlocked = false;
            unlockProgress = 0;
            document.getElementById('unlockBar').style.width = '0%';
            
            musicPlayer.classList.remove('unlocked');
            setTimeout(() => {
                vinylUnlock.style.display = 'block';
            }, 300);
            
            if (isPlaying) {
                togglePlay();
            }
        }
        
        function togglePlay() {
            const playBtn = document.getElementById('playBtn');
            const progress = document.getElementById('progress');
            
            if (!isPlaying) {
                playBtn.textContent = '‚è∏Ô∏è Pause';
                isPlaying = true;
                
                let width = 0;
                progressInterval = setInterval(() => {
                    width += 1;
                    progress.style.width = width + '%';
                    if (width >= 100) {
                        clearInterval(progressInterval);
                        nextSong();
                    }
                }, 100);
            } else {
                playBtn.textContent = '‚ñ∂Ô∏è Play';
                isPlaying = false;
                clearInterval(progressInterval);
            }
        }
        
        function nextSong() {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
            document.getElementById('currentSong').textContent = songs[currentSongIndex];
            document.getElementById('progress').style.width = '0%';
            document.getElementById('playBtn').textContent = '‚ñ∂Ô∏è Play';
            isPlaying = false;
            clearInterval(progressInterval);
        }
        
        function previousSong() {
            currentSongIndex = currentSongIndex === 0 ? songs.length - 1 : currentSongIndex - 1;
            document.getElementById('currentSong').textContent = songs[currentSongIndex];
            document.getElementById('progress').style.width = '0%';
            document.getElementById('playBtn').textContent = '‚ñ∂Ô∏è Play';
            isPlaying = false;
            clearInterval(progressInterval);
        }
        
        // Photo Gallery functionality
        function addSparkle(button) {
            const card = button.closest('.photo-card');
            
            card.style.boxShadow = '0 0 30px rgba(255, 105, 180, 0.6)';
            card.style.transform = 'scale(1.02)';
            
            setTimeout(() => {
                card.style.boxShadow = '';
                card.style.transform = '';
            }, 1000);
            
            showMessage('üíï Love added to photo!');
        }
        
        // Milestone System Variables
        let milestones = [];
        let currentCategory = 'monthly';
        let currentYear = 2025;
        let currentMilestone = null;
        let milestoneCountdownInterval = null;
        let nextMilestoneCountdownInterval = null;
        
        // Milestone System Functions
        function generateMilestones() {
            milestones = [];
            const startDate = new Date('2025-03-06');
            
            // Generate monthly milestones starting from April 6, 2025 (first monthsary)
            for (let year = 2025; year <= 2124; year++) {
                for (let month = 1; month <= 12; month++) {
                    const date = new Date(year, month - 1, 6);
                    if (date > startDate) { // Start after March 6, 2025
                        // Calculate months since start (March 6, 2025)
                        const monthsSinceStart = (year - 2025) * 12 + (month - 3);
                        if (monthsSinceStart > 0) {
                            milestones.push({
                                id: `monthly-${year}-${month}`,
                                date: date,
                                type: 'monthly',
                                title: `${getOrdinal(monthsSinceStart)} Monthsary`,
                                category: 'monthly',
                                year: year
                            });
                        }
                    }
                }
            }
            
            // Generate yearly milestones starting from March 6, 2026
            for (let year = 2026; year <= 2124; year++) {
                const date = new Date(year, 2, 6); // March 6th
                const yearsSinceStart = year - 2025;
                let category = 'early';
                if (year >= 2035 && year <= 2074) category = 'golden';
                if (year >= 2075) category = 'lifetime';
                
                milestones.push({
                    id: `yearly-${year}`,
                    date: date,
                    type: 'yearly',
                    title: `${getOrdinal(yearsSinceStart)} Anniversary`,
                    category: category,
                    year: year
                });
            }
            
            // Sort by date
            milestones.sort((a, b) => a.date - b.date);
        }
        
        function getOrdinal(num) {
            const suffixes = ['th', 'st', 'nd', 'rd'];
            const v = num % 100;
            return num + (suffixes[(v - 20) % 10] || suffixes[v] || suffixes[0]);
        }
        
        function switchMilestoneCategory(category) {
            currentCategory = category;
            
            // Update tab appearance
            document.querySelectorAll('.milestone-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            // Show/hide year selector for monthly
            const yearSelector = document.getElementById('yearSelector');
            if (category === 'monthly') {
                yearSelector.style.display = 'block';
                populateYearSelector();
            } else {
                yearSelector.style.display = 'none';
            }
            
            renderMilestones();
        }
        
        function populateYearSelector() {
            const yearSelect = document.getElementById('yearSelect');
            yearSelect.innerHTML = '';
            
            for (let year = 2025; year <= 2124; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                if (year === currentYear) option.selected = true;
                yearSelect.appendChild(option);
            }
        }
        
        function filterByYear() {
            currentYear = parseInt(document.getElementById('yearSelect').value);
            renderMilestones();
        }
        
        function renderMilestones() {
            const grid = document.getElementById('milestoneGrid');
            grid.innerHTML = '';
            
            let filteredMilestones = [];
            
            if (currentCategory === 'monthly') {
                filteredMilestones = milestones.filter(m => m.type === 'monthly' && m.year === currentYear);
            } else {
                filteredMilestones = milestones.filter(m => m.category === currentCategory);
            }
            
            filteredMilestones.forEach(milestone => {
                const item = createMilestoneItem(milestone);
                grid.appendChild(item);
            });
            
            // Draw all pixelated icons
            setTimeout(() => {
                document.querySelectorAll('.milestone-lock').forEach(canvas => {
                    const isUnlocked = canvas.closest('.milestone-item').classList.contains('unlocked');
                    drawPixelatedLock(canvas, isUnlocked);
                });
            }, 100);
        }
        
        function createMilestoneItem(milestone) {
            const now = new Date();
            // Only unlock milestones that have actually passed
            const isUnlocked = milestone.date < now;
            
            const item = document.createElement('div');
            item.className = `milestone-item ${isUnlocked ? 'unlocked' : ''}`;
            item.onclick = () => openMilestone(milestone);
            
            const countdownText = isUnlocked ? 'Unlocked!' : getCountdownText(milestone.date);
            
            item.innerHTML = `
                <canvas class="milestone-lock" width="32" height="32"></canvas>
                <div class="milestone-title">${milestone.title}</div>
                <div class="milestone-countdown">${countdownText}</div>
            `;
            
            return item;
        }
        
        function getCountdownText(date) {
            const now = new Date();
            const diff = date - now;
            
            if (diff <= 0) return 'Unlocked!';
            
            const days = Math.floor(diff / (24 * 60 * 60 * 1000));
            const months = Math.floor(days / 30);
            const years = Math.floor(days / 365);
            
            if (years > 0) return `${years} year${years > 1 ? 's' : ''}`;
            if (months > 0) return `${months} month${months > 1 ? 's' : ''}`;
            return `${days} day${days > 1 ? 's' : ''}`;
        }
        
        function openMilestone(milestone) {
            currentMilestone = milestone;
            const modal = document.getElementById('milestoneModal');
            const now = new Date();
            const isUnlocked = milestone.date < now;
            
            // Set title and icon
            document.getElementById('modalTitle').textContent = milestone.title;
            drawPixelatedLock(document.getElementById('modalIcon'), isUnlocked, true);
            
            if (isUnlocked) {
                showUnlockedMilestone(milestone);
            } else {
                showLockedMilestone(milestone);
            }
            
            modal.style.display = 'flex';
        }
        
        function showLockedMilestone(milestone) {
            const messages = [
                "This special moment is still locked away, waiting for the perfect time to be revealed! ‚ú®",
                "Patience, my love! This milestone will unlock when the time is right. üíï",
                "Something beautiful is waiting for you on this date. Can't wait to share it! üåü",
                "This locked treasure holds a special surprise just for us! üíé"
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            document.getElementById('modalMessage').textContent = randomMessage;
            
            // Hide date badge for locked milestones
            document.getElementById('modalDateBadge').style.display = 'none';
            
            // Show live countdown
            const countdownDiv = document.getElementById('modalCountdown');
            countdownDiv.style.display = 'block';
            
            // Hide memory section
            document.getElementById('memorySection').style.display = 'none';
            
            // Start live countdown
            updateMilestoneCountdown(milestone.date);
            milestoneCountdownInterval = setInterval(() => {
                updateMilestoneCountdown(milestone.date);
            }, 1000);
        }
        
        function showUnlockedMilestone(milestone) {
            const monthlyMessages = [
                "Happy Monthsary, my love! Another beautiful month of our love story! Each day with you is a gift. üíï",
                "Look how far we've come together! This monthsary brought us even closer. üåü",
                "Celebrating another monthsary of laughter, love, and endless joy with you! ‚ú®",
                "Time flies when you're with your soulmate. Here's to another amazing monthsary! üíñ",
                "Every monthsary with you feels like a new adventure. I love our journey! üåà"
            ];
            
            const yearlyMessages = [
                "Happy Anniversary, my love! Another year of incredible memories together. üíï",
                "Celebrating another year of our beautiful love story! Here's to forever! üåü",
                "Another year, another chapter of our amazing journey. I love you more each day! ‚ú®",
                "Time has only made our love stronger. Happy Anniversary, sweetheart! üíñ",
                "From this day forward, for better or worse, for richer or poorer... Happy Anniversary! üåà"
            ];
            
            const messages = milestone.type === 'monthly' ? monthlyMessages : yearlyMessages;
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            
            // Format the date nicely and show in badge
            const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
            const formattedDate = milestone.date.toLocaleDateString('en-US', dateOptions);
            
            const dateBadge = document.getElementById('modalDateBadge');
            dateBadge.textContent = formattedDate;
            dateBadge.style.display = 'inline-block';
            
            document.getElementById('modalMessage').textContent = randomMessage;
            
            // Hide countdown
            document.getElementById('modalCountdown').style.display = 'none';
            
            // Show memory section
            const memorySection = document.getElementById('memorySection');
            memorySection.style.display = 'block';
            
            // Load existing memory or show input
            loadMemoryForMilestone(milestone);
        }
        
        function updateMilestoneCountdown(date) {
            const now = new Date();
            const diff = date - now;
            
            if (diff <= 0) {
                document.getElementById('modalCountdown').textContent = 'This milestone is now unlocked!';
                return;
            }
            
            const days = Math.floor(diff / (24 * 60 * 60 * 1000));
            const hours = Math.floor((diff % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
            const minutes = Math.floor((diff % (60 * 60 * 1000)) / (60 * 1000));
            const seconds = Math.floor((diff % (60 * 1000)) / 1000);
            
            document.getElementById('modalCountdown').textContent = 
                `Unlocks in: ${days}d ${hours}h ${minutes}m ${seconds}s`;
        }
        
        function loadMemoryForMilestone(milestone) {
            const savedMemory = localStorage.getItem(`milestone-${milestone.id}`);
            const savedPhoto = localStorage.getItem(`milestone-photo-${milestone.id}`);
            
            const memoryDisplay = document.getElementById('memoryDisplay');
            const memoryInput = document.getElementById('memoryInput');
            
            if (savedMemory || savedPhoto) {
                // Show saved memory
                memoryDisplay.style.display = 'block';
                memoryInput.style.display = 'none';
                
                document.getElementById('memoryText').textContent = savedMemory || '';
                
                const photoElement = document.getElementById('memoryPhoto');
                if (savedPhoto) {
                    photoElement.src = savedPhoto;
                    photoElement.style.display = 'block';
                } else {
                    photoElement.style.display = 'none';
                }
            } else {
                // Show input form
                memoryDisplay.style.display = 'none';
                memoryInput.style.display = 'block';
                
                // Clear previous inputs
                document.getElementById('memoryTextarea').value = '';
                document.getElementById('previewPhoto').style.display = 'none';
                document.getElementById('uploadText').style.display = 'block';
                
                // Draw heart on save button
                setTimeout(() => {
                    const saveBtn = document.querySelector('.save-memory-btn canvas');
                    if (saveBtn) {
                        drawPixelatedHeart(saveBtn);
                    }
                }, 100);
            }
        }
        
        function editMemory() {
            const memoryDisplay = document.getElementById('memoryDisplay');
            const memoryInput = document.getElementById('memoryInput');
            
            // Switch to edit mode
            memoryDisplay.style.display = 'none';
            memoryInput.style.display = 'block';
            
            // Load current values
            const currentText = document.getElementById('memoryText').textContent;
            const currentPhoto = document.getElementById('memoryPhoto').src;
            
            document.getElementById('memoryTextarea').value = currentText;
            
            if (currentPhoto && !currentPhoto.includes('data:')) {
                // If there's a photo, show it in preview
                const previewPhoto = document.getElementById('previewPhoto');
                previewPhoto.src = currentPhoto;
                previewPhoto.style.display = 'block';
                document.getElementById('uploadText').style.display = 'none';
            }
            

        }
        
        function selectPhoto() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const previewPhoto = document.getElementById('previewPhoto');
                        previewPhoto.src = event.target.result;
                        previewPhoto.style.display = 'block';
                        document.getElementById('uploadText').style.display = 'none';
                    };
                    reader.readAsDataURL(file);
                }
            };
            
            input.click();
        }
        
        function saveMemory() {
            const text = document.getElementById('memoryTextarea').value.trim();
            const photoElement = document.getElementById('previewPhoto');
            const photo = photoElement.style.display !== 'none' ? photoElement.src : null;
            
            if (!text && !photo) {
                alert('Please add some text or a photo for your memory!');
                return;
            }
            
            // Save to localStorage
            if (text) {
                localStorage.setItem(`milestone-${currentMilestone.id}`, text);
            }
            if (photo) {
                localStorage.setItem(`milestone-photo-${currentMilestone.id}`, photo);
            }
            
            // Refresh the display
            loadMemoryForMilestone(currentMilestone);
            
            // Show success message
            showMessage('üíé Memory saved successfully!');
            
            // Add sparkle effect
            createSparkles(document.querySelector('.milestone-modal-content'));
            

        }
        
        function closeMilestoneModal() {
            document.getElementById('milestoneModal').style.display = 'none';
            if (milestoneCountdownInterval) {
                clearInterval(milestoneCountdownInterval);
                milestoneCountdownInterval = null;
            }
        }
        
        function updateNextMilestoneCountdown() {
            const now = new Date();
            const nextMilestone = milestones.find(m => m.date > now);
            
            if (!nextMilestone) {
                document.getElementById('nextMilestoneText').textContent = 'All milestones unlocked!';
                return;
            }
            
            const diff = nextMilestone.date - now;
            const days = Math.floor(diff / (24 * 60 * 60 * 1000));
            const hours = Math.floor((diff % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
            const minutes = Math.floor((diff % (60 * 60 * 1000)) / (60 * 1000));
            
            let countdownText = '';
            if (days > 0) {
                countdownText = `${days} day${days > 1 ? 's' : ''}`;
            } else if (hours > 0) {
                countdownText = `${hours} hour${hours > 1 ? 's' : ''}`;
            } else {
                countdownText = `${minutes} minute${minutes > 1 ? 's' : ''}`;
            }
            
            document.getElementById('nextMilestoneText').textContent = 
                `Next unlock: ${nextMilestone.title} in ${countdownText}`;
        }
        
        function editPhoto(button) {
            const card = button.closest('.photo-card');
            const titleInput = card.querySelector('.caption-label-input');
            const caption = card.querySelector('.caption-input');
            
            titleInput.focus();
            titleInput.style.background = 'rgba(255, 192, 203, 0.3)';
            caption.style.background = 'rgba(255, 192, 203, 0.3)';
            
            showMessage('‚úèÔ∏è Edit mode activated! Update your caption!');
        }
        
        function uploadPhoto(placeholder) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        placeholder.style.backgroundImage = `url(${event.target.result})`;
                        placeholder.style.backgroundSize = 'cover';
                        placeholder.style.backgroundPosition = 'center';
                        placeholder.innerHTML = '';
                        
                        showMessage('üì∏ Photo uploaded successfully!');
                    };
                    reader.readAsDataURL(file);
                }
            };
            
            input.click();
        }
        
        function addNewPhotoCard() {
            const photoGrid = document.querySelector('.photo-grid');
            
            const newCard = document.createElement('div');
            newCard.className = 'photo-card';
            newCard.innerHTML = `
                <div class="photo-controls">
                    <div class="control-button" onclick="addSparkle(this)" title="Add Love">üíï</div>
                    <div class="control-button" onclick="editPhoto(this)" title="Edit">‚úèÔ∏è</div>
                </div>
                <div class="photo-placeholder" onclick="uploadPhoto(this)">
                    <div>üì∏<br>Click to Upload<br>Photo</div>
                </div>
                <div class="photo-caption">
                    <input type="text" class="caption-label-input" placeholder="Add a title..." />
                    <textarea class="caption-input" placeholder="Write your memory here..."></textarea>
                </div>
            `;
            
            photoGrid.appendChild(newCard);
            newCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            showMessage('‚ú® New photo card added!');
        }
        
        // Utility functions
        function showMessage(message) {
            // Remove any existing message first
            const existingMessage = document.querySelector('.love-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'love-message';
            messageDiv.style.cssText = `
                background: linear-gradient(45deg, #ff69b4, #ffc0cb);
                color: white;
                padding: 12px 20px;
                border-radius: 25px;
                font-family: 'Press Start 2P', cursive;
                font-size: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3), 0 0 20px rgba(255, 105, 180, 0.4);
                margin-top: 20px;
                text-align: center;
                animation: floatingMessage 3s ease-in-out;
                transform-origin: center;
                position: relative;
            `;
            messageDiv.textContent = message;
            

            
            // Insert after countdown display
            const countdownDisplay = document.querySelector('.countdown-display');
            countdownDisplay.insertAdjacentElement('afterend', messageDiv);
            
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 3000);
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
            
            @keyframes sparkleFloat {
                0% {
                    opacity: 1;
                    transform: translateY(0) scale(1) rotate(0deg);
                }
                100% {
                    opacity: 0;
                    transform: translateY(-40px) scale(1.5) rotate(180deg);
                }
            }
            
            @keyframes floatingMessage {
                0% {
                    opacity: 0;
                    transform: translateY(10px) scale(0.95);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3), 0 0 20px rgba(255, 105, 180, 0.4);
                }
                20% {
                    opacity: 1;
                    transform: translateY(-3px) scale(1.02);
                    box-shadow: 0 8px 20px rgba(0,0,0,0.4), 0 0 30px rgba(255, 105, 180, 0.6);
                }
                40% {
                    transform: translateY(-6px) scale(1);
                    box-shadow: 0 6px 16px rgba(0,0,0,0.3), 0 0 25px rgba(255, 105, 180, 0.5);
                }
                60% {
                    transform: translateY(-4px) scale(1);
                }
                80% {
                    opacity: 1;
                    transform: translateY(-2px) scale(1);
                }
                100% {
                    opacity: 0;
                    transform: translateY(-8px) scale(0.98);
                    box-shadow: 0 2px 8px rgba(0,0,0,0.2), 0 0 15px rgba(255, 105, 180, 0.3);
                }
            }
            
            @keyframes floatingHearts {
                0% {
                    opacity: 0;
                    transform: translateY(0) scale(0.8);
                }
                25% {
                    opacity: 1;
                    transform: translateY(-8px) scale(1);
                }
                75% {
                    opacity: 0.8;
                    transform: translateY(-20px) scale(1.1);
                }
                100% {
                    opacity: 0;
                    transform: translateY(-35px) scale(0.9);
                }
            }
            
            @keyframes messageAppear {
                0% {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0.8);
                }
                100% {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
            }
        `;
        document.head.appendChild(style);
        
        // Pixelated Art Functions
        function drawPixelatedLock(canvas, isUnlocked = false, isLarge = false) {
            const ctx = canvas.getContext('2d');
            const size = isLarge ? 3 : 2;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            ctx.imageSmoothingEnabled = false;
            
            if (isUnlocked && !isLarge) {
                // Draw beautiful pixelated heart with gradient effect
                const heartColors = ['#ff1493', '#ff69b4', '#ffb6c1'];
                
                // Perfect symmetrical 8-bit heart pattern - completely balanced
                const pattern = [
                    [0,0,0,2,2,2,0,0,0,2,2,2,0,0,0],
                    [0,0,2,1,1,1,2,0,2,1,1,1,2,0,0],
                    [0,2,1,1,1,1,1,2,1,1,1,1,1,2,0],
                    [0,2,1,1,1,1,1,1,1,1,1,1,1,2,0],
                    [0,2,1,1,1,1,1,1,1,1,1,1,1,2,0],
                    [0,0,2,1,1,1,1,1,1,1,1,1,2,0,0],
                    [0,0,0,2,1,1,1,1,1,1,1,2,0,0,0],
                    [0,0,0,0,2,1,1,1,1,1,2,0,0,0,0],
                    [0,0,0,0,0,2,1,1,1,2,0,0,0,0,0],
                    [0,0,0,0,0,0,2,1,2,0,0,0,0,0,0]
                ];
                
                // Center the heart perfectly
                const offsetX = (width - pattern[0].length * size) / 2;
                const offsetY = (height - pattern.length * size) / 2;
                
                pattern.forEach((row, y) => {
                    row.forEach((pixel, x) => {
                        if (pixel > 0) {
                            ctx.fillStyle = heartColors[pixel - 1];
                            ctx.fillRect(offsetX + x * size, offsetY + y * size, size, size);
                        }
                    });
                });
            } else if (isUnlocked && isLarge) {
                // Beautiful large heart with shading and highlights
                const heartColors = ['#ff1493', '#ff69b4', '#ffb6c1', '#ffc0cb'];
                
                const pattern = [
                    [0,0,0,3,3,3,3,0,0,3,3,3,3,0,0,0],
                    [0,0,3,2,2,2,2,3,3,2,2,2,2,3,0,0],
                    [0,3,2,1,1,1,1,2,2,1,1,1,1,2,3,0],
                    [3,2,1,1,1,1,1,1,1,1,1,1,1,1,2,3],
                    [3,2,1,1,1,1,1,1,1,1,1,1,1,1,2,3],
                    [3,2,1,1,1,1,1,1,1,1,1,1,1,1,2,3],
                    [3,2,1,1,1,1,1,1,1,1,1,1,1,1,2,3],
                    [0,3,2,1,1,1,1,1,1,1,1,1,1,2,3,0],
                    [0,0,3,2,1,1,1,1,1,1,1,1,2,3,0,0],
                    [0,0,0,3,2,1,1,1,1,1,1,2,3,0,0,0],
                    [0,0,0,0,3,2,1,1,1,1,2,3,0,0,0,0],
                    [0,0,0,0,0,3,2,1,1,2,3,0,0,0,0,0],
                    [0,0,0,0,0,0,3,2,2,3,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0]
                ];
                
                // Center the large heart
                const offsetX = (width - pattern[0].length * 2.5) / 2;
                const offsetY = (height - pattern.length * 2.5) / 2;
                
                pattern.forEach((row, y) => {
                    row.forEach((pixel, x) => {
                        if (pixel > 0) {
                            ctx.fillStyle = heartColors[pixel - 1];
                            ctx.fillRect(offsetX + x * 2.5, offsetY + y * 2.5, 2.5, 2.5);
                        }
                    });
                });
            } else {
                // Draw detailed locked padlock
                const grayColors = ['#2c2c2c', '#404040', '#555555', '#6a6a6a', '#808080', '#999999', '#b3b3b3'];
                const pattern = isLarge ? [
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                    [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
                    [0,0,0,1,2,2,2,2,2,2,2,2,1,0,0,0],
                    [0,0,1,2,3,3,3,3,3,3,3,3,2,1,0,0],
                    [0,0,1,2,3,0,0,0,0,0,0,3,2,1,0,0],
                    [0,0,1,2,3,0,0,0,0,0,0,3,2,1,0,0],
                    [0,0,1,2,3,0,0,0,0,0,0,3,2,1,0,0],
                    [1,1,1,2,3,3,3,3,3,3,3,3,2,1,1,1],
                    [1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1],
                    [1,4,5,5,5,5,5,5,5,5,5,5,5,5,4,1],
                    [1,4,5,6,6,6,6,6,6,6,6,6,6,5,4,1],
                    [1,4,5,6,6,6,2,2,2,2,6,6,6,5,4,1],
                    [1,4,5,6,6,6,2,1,1,2,6,6,6,5,4,1],
                    [1,4,5,6,6,6,6,6,6,6,6,6,6,5,4,1],
                    [1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
                ] : [
                    [0,1,1,1,1,1,0,0],
                    [1,2,3,3,3,2,1,0],
                    [1,2,0,0,0,2,1,0],
                    [1,2,0,0,0,2,1,0],
                    [4,4,4,4,4,4,4,4],
                    [4,5,5,5,5,5,5,4],
                    [4,5,6,2,2,6,5,4],
                    [4,4,4,4,4,4,4,4]
                ];
                
                pattern.forEach((row, y) => {
                    row.forEach((pixel, x) => {
                        if (pixel > 0) {
                            ctx.fillStyle = grayColors[pixel - 1];
                            ctx.fillRect(x * size, y * size, size, size);
                        }
                    });
                });
            }
        }
        
        function drawTabIcon(canvas, category) {
            const ctx = canvas.getContext('2d');
            const size = 1.5;
            
            ctx.clearRect(0, 0, 16, 16);
            ctx.imageSmoothingEnabled = false;
            
            const colorSets = {
                monthly: ['#ff1493', '#ff69b4'],
                early: ['#ff69b4', '#ffc0cb'],
                golden: ['#ffd700', '#ffed4e'],
                lifetime: ['#dda0dd', '#e6b3ff']
            };
            
            // Beautiful small heart pattern with perfect symmetry
            const heartPattern = [
                [0,0,2,2,0,2,2,0,0],
                [0,2,1,1,2,1,1,2,0],
                [2,1,1,1,1,1,1,1,2],
                [2,1,1,1,1,1,1,1,2],
                [0,2,1,1,1,1,1,2,0],
                [0,0,2,1,1,1,2,0,0],
                [0,0,0,2,1,2,0,0,0],
                [0,0,0,0,2,0,0,0,0]
            ];
            
            const colors = colorSets[category] || colorSets.monthly;
            
            // Center the heart in the 16x16 canvas
            const offsetX = (16 - heartPattern[0].length * size) / 2;
            const offsetY = (16 - heartPattern.length * size) / 2;
            
            heartPattern.forEach((row, y) => {
                row.forEach((pixel, x) => {
                    if (pixel > 0) {
                        ctx.fillStyle = colors[pixel - 1];
                        ctx.fillRect(offsetX + x * size, offsetY + y * size, size, size);
                    }
                });
            });
        }
        
        function drawCountdownIcon(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, 16, 16);
            ctx.imageSmoothingEnabled = false;
            
            const pattern = [
                [0,1,1,1,1,1,1,0],
                [1,0,0,0,0,0,0,1],
                [1,0,0,1,0,0,0,1],
                [1,0,0,1,1,0,0,1],
                [1,0,0,0,1,0,0,1],
                [1,0,0,0,0,0,0,1],
                [1,0,0,0,0,0,0,1],
                [0,1,1,1,1,1,1,0]
            ];
            
            ctx.fillStyle = '#d4669a';
            pattern.forEach((row, y) => {
                row.forEach((pixel, x) => {
                    if (pixel) {
                        ctx.fillRect(x * 2, y * 2, 2, 2);
                    }
                });
            });
        }
        
        function drawPixelatedHeart(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, 16, 16);
            ctx.imageSmoothingEnabled = false;
            
            // Small pixelated heart pattern
            const heartPattern = [
                [0,2,2,0,0,2,2,0],
                [2,1,1,2,2,1,1,2],
                [2,1,1,1,1,1,1,2],
                [0,2,1,1,1,1,2,0],
                [0,0,2,1,1,2,0,0],
                [0,0,0,2,2,0,0,0]
            ];
            
            const colors = ['#ffffff', '#ffb6c1'];
            
            // Center the heart
            const offsetX = (16 - heartPattern[0].length * 2) / 2;
            const offsetY = (16 - heartPattern.length * 2) / 2;
            
            heartPattern.forEach((row, y) => {
                row.forEach((pixel, x) => {
                    if (pixel > 0) {
                        ctx.fillStyle = colors[pixel - 1];
                        ctx.fillRect(offsetX + x * 2, offsetY + y * 2, 2, 2);
                    }
                });
            });
        }
        
        // Animation Functions
        function createSparkles(element) {
            const rect = element.getBoundingClientRect();
            
            for (let i = 0; i < 8; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = (rect.left + Math.random() * rect.width) + 'px';
                sparkle.style.top = (rect.top + Math.random() * rect.height) + 'px';
                sparkle.style.background = ['#ff69b4', '#ffc0cb', '#ffb6c1', '#dda0dd'][Math.floor(Math.random() * 4)];
                
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    if (sparkle.parentNode) {
                        sparkle.remove();
                    }
                }, 1000);
            }
        }
        
        function createConfetti() {
            const colors = ['#ff69b4', '#ffc0cb', '#ffb6c1', '#dda0dd', '#87ceeb', '#ffd700'];
            
            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * window.innerWidth + 'px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 2 + 's';
                
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.remove();
                    }
                }, 3000);
            }
        }
        
        // Initialize Milestone System
        function initializeMilestoneSystem() {
            generateMilestones();
            
            // Draw tab icons
            setTimeout(() => {
                document.querySelectorAll('.milestone-tab').forEach(tab => {
                    const category = tab.getAttribute('data-category');
                    const canvas = tab.querySelector('.tab-icon');
                    drawTabIcon(canvas, category);
                });
                
                // Draw countdown icon
                drawCountdownIcon(document.getElementById('countdownIcon'));
            }, 100);
            
            // Start next milestone countdown
            updateNextMilestoneCountdown();
            nextMilestoneCountdownInterval = setInterval(updateNextMilestoneCountdown, 60000); // Update every minute
            
            // Initial render
            renderMilestones();
        }
        
        // Close popups when clicking outside
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('book-popup') || 
                event.target.classList.contains('love-popup') ||
                event.target.classList.contains('milestone-modal')) {
                event.target.style.display = 'none';
                if (milestoneCountdownInterval) {
                    clearInterval(milestoneCountdownInterval);
                    milestoneCountdownInterval = null;
                }
            }
        });
        
        // Drag and drop for photo upload
        document.addEventListener('DOMContentLoaded', function() {
            const photoUploadArea = document.getElementById('photoUploadArea');
            if (photoUploadArea) {
                photoUploadArea.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('dragover');
                });
                
                photoUploadArea.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                });
                
                photoUploadArea.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0 && files[0].type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = function(event) {
                            const previewPhoto = document.getElementById('previewPhoto');
                            previewPhoto.src = event.target.result;
                            previewPhoto.style.display = 'block';
                            document.getElementById('uploadText').style.display = 'none';
                        };
                        reader.readAsDataURL(files[0]);
                    }
                });
            }
        });
        
        // Initialize countdown
        setInterval(updateCountdown, 1000);
        updateCountdown();
        
        // Initialize milestone system when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeMilestoneSystem();
        });
        
        console.log('Love Story website with Milestone System loaded successfully!');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9647438f964a0466',t:'MTc1MzQwMDQ0MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
